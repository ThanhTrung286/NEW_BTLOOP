<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.control.Hyperlink?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.Pagination?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.control.TableView?>

<!-- 
    Đã cập nhật fx:controller để khớp với package và tên lớp
    chính xác: "com.NEW_BTLOOP.LibraryManagement.LibraryUIDemoController".
-->

<BorderPane prefHeight="700.0" prefWidth="1200.0" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.NEW_BTLOOP.LibraryManagement.controller.LibraryUIDemoController">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-background-color: #2c3e50; -fx-padding: 15;" BorderPane.alignment="CENTER">
            <children>
                <Label text="HỆ THỐNG QUẢN LÝ THƯ VIỆN" textFill="WHITE">
                    <font>
                        <Font name="System Bold" size="20.0" />
                    </font>
                </Label>
                <HBox alignment="CENTER_LEFT" spacing="5" HBox.hgrow="ALWAYS">
                    <TextField fx:id="searchField" prefWidth="300.0" promptText="Tìm kiếm sách" style="-fx-background-color: #3e5163; -fx-text-fill: white; -fx-prompt-text-fill: #b0b0b0; -fx-font-size: 14px; -fx-padding: 8 10; -fx-border-radius: 5; -fx-background-radius: 5;" />
                    <Button fx:id="searchButton" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 10;" text="Tìm kiếm" />
                </HBox>

                <Region HBox.hgrow="ALWAYS" />
                <Button style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Thông báo (3)" />

                <Button fx:id="btnLogin" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Đăng nhập" />
                <Button fx:id="btnLogout" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Đăng xuất" />
                <Button fx:id="btnSettings" style="-fx-background-color: #7f8c8d; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Cài đặt" />
            </children>
        </HBox>
    </top>

    <left>
        <VBox alignment="TOP_LEFT" prefWidth="200.0" spacing="15.0" style="-fx-background-color: #34495e; -fx-padding: 20 10;" BorderPane.alignment="TOP_LEFT">
            <children>
                <ToggleButton fx:id="btnDashboard" text=" Dashboard" maxWidth="1.7976931348623157E308" styleClass="menu-toggle" toggleGroup="$menuGroup" selected="true"/>
                <ToggleButton fx:id="btnDocumentsList" text=" Danh sách tài liệu" maxWidth="1.7976931348623157E308" styleClass="menu-toggle" toggleGroup="$menuGroup"/>
                <ToggleButton fx:id="btnLoanManagement" text=" Quản lý mượn trả" maxWidth="1.7976931348623157E308" styleClass="menu-toggle" toggleGroup="$menuGroup"/>
                <ToggleButton fx:id="btnReadersManagement" text=" Quản lý người đọc" maxWidth="1.7976931348623157E308" styleClass="menu-toggle" toggleGroup="$menuGroup"/>
                <Region VBox.vgrow="ALWAYS" />
                <Separator prefWidth="200.0" style="-fx-background-color: #55606d;">
                    <VBox.margin>
                        <Insets bottom="10.0" top="10.0" />
                    </VBox.margin>
                </Separator>
                <VBox alignment="TOP_LEFT" spacing="5" style="-fx-padding: 0 10 0 10;">
                    <Label text="Người dùng: " textFill="#b0b0b0">
                        <font><Font size="13.0" /></font>
                    </Label>
                    <Label text="Vai trò: Thủ thư" textFill="#b0b0b0">
                        <font><Font size="13.0" /></font>
                    </Label>
                </VBox>
                <VBox alignment="TOP_LEFT" spacing="5" style="-fx-padding: 10 10 0 10;">
                    <Hyperlink style="-fx-text-fill: #3498db; -fx-font-weight: bold;" text="Báo cáo lỗi" />
                    <Hyperlink style="-fx-text-fill: #3498db; -fx-font-weight: bold;" text="Trợ giúp &amp; Hỗ trợ" />
                </VBox>
            </children>
        </VBox>
    </left>

    <center>
        <StackPane fx:id="contentArea" style="-fx-background-color: #ecf0f1; -fx-padding: 20;">

            <VBox fx:id="dashboardView" spacing="15.0">
                <children>
                    <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Sách được tìm đọc nhiều (Dashboard)">
                        <VBox.margin>
                            <Insets bottom="10.0" />
                        </VBox.margin>
                    </Label>
                    <FlowPane fx:id="bookPaneDashboard" hgap="15.0" vgap="15.0">
                        </FlowPane>
                </children>
            </VBox>

            <VBox fx:id="documentsListView" managed="false" spacing="10.0" style="-fx-background-color: #ffffff; -fx-padding: 15; -fx-border-radius: 8; -fx-background-radius: 8;" visible="false">
                <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Danh Sách Tài Liệu" />
             <HBox alignment="CENTER_LEFT" spacing="10">
                <Button fx:id="btnAddDocument" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Thêm Tài Liệu" />
                <Button fx:id="btnEditDocument" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Sửa Tài Liệu" />
                <Button fx:id="btnDeleteDocument" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Xóa Tài Liệu" />
                <Region HBox.hgrow="ALWAYS" />
                <TextField fx:id="documentFilterField" promptText="Lọc theo tên, tác giả..." style="-fx-pref-width: 250px; -fx-padding: 5;" />
            </HBox>
                <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                    <FlowPane fx:id="documentCardsPane" hgap="15.0" style="-fx-padding: 10;" vgap="15.0">
                        </FlowPane>
                </ScrollPane>
            </VBox>

            <VBox fx:id="documentDetailView" managed="false" spacing="10.0" style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-border-radius: 8; -fx-background-radius: 8;" visible="false">
                <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Thông Tin Chi Tiết Tài Liệu" />
                <Label fx:id="detailBookCoverPlaceholder" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-pref-height: 200; -fx-pref-width: 130; -fx-alignment: CENTER; -fx-border-color: #cccccc;" text="[Placeholder cho Bìa Sách]" />
                <Label fx:id="detailTitle" text="Tên: " />
                <Label fx:id="detailAuthor" text="Tác giả: " />
                <Label fx:id="detailCategory" text="Thể loại: " />
                <Label fx:id="detailDescription" text="Mô tả: " wrapText="true" />
                <HBox spacing="10">
                    <Button fx:id="btnBackToDocuments" style="-fx-background-color: #7f8c8d; -fx-text-fill: white; -fx-padding: 8 15;" text="Quay Lại Danh Sách" />
                </HBox>
            </VBox>

            <VBox fx:id="loanReturnView" managed="false" spacing="10.0" style="-fx-background-color: #ffffff; -fx-padding: 20; -fx-border-radius: 8; -fx-background-radius: 8;" visible="false">
                <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Quản Lý Mượn/Trả Tài Liệu" />
                
                <HBox spacing="10">
        <Button fx:id="btnBorrow" 
                style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-padding: 10 20;" 
                text="Cho Mượn" />
        <Button fx:id="btnReturn" 
                style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-padding: 10 20;" 
                text="Trả Tài Liệu" />
                </HBox>
                <TableView fx:id="borrowTable" VBox.vgrow="ALWAYS">
                    <columns>
                    <TableColumn fx:id="recordIdCol" text="Record ID" prefWidth="120"/>
                    <TableColumn fx:id="userIdCol" text="User ID" prefWidth="120"/>
                    <TableColumn fx:id="documentIdCol" text="Document ID" prefWidth="120"/>
                    <TableColumn fx:id="borrowDateCol" text="Borrow Date" prefWidth="120"/>
                    <TableColumn fx:id="expectedReturnDateCol" text="Expected Return" prefWidth="140"/>
                    <TableColumn fx:id="actualReturnDateCol" text="Actual Return" prefWidth="140"/>
                    </columns>  
                </TableView>
            </VBox>

            <VBox fx:id="readersManagementView" managed="false" spacing="10.0" style="-fx-background-color: #ffffff; -fx-padding: 15; -fx-border-radius: 8; -fx-background-radius: 8;" visible="false">
                <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="Quản Lý Người Đọc" />
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Button fx:id="btnAddReader" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Thêm Người Đọc" />
                    <Button fx:id="btnEditReader" style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Sửa Thông Tin" />
                    <Button fx:id="btnDeleteReader" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" text="Xóa Người Đọc" />
                    <Region HBox.hgrow="ALWAYS" />
                    <TextField fx:id="readerFilterField" promptText="Lọc theo tên, ID..." style="-fx-pref-width: 250px; -fx-padding: 5;" />
                </HBox>
                <TableView fx:id="readersTable" VBox.vgrow="ALWAYS">
                    <columns>
                         <TableColumn fx:id="colUserID" prefWidth="100" text="UserID" />
                         <TableColumn fx:id="colName" prefWidth="200" text="Tên" />
                         <TableColumn fx:id="colEmail" prefWidth="250" text="Email" />
                         <TableColumn fx:id="colBorrowedDocs" prefWidth="100" text="Đã Mượn" />
                         <TableColumn fx:id="colBorrowedLimit" prefWidth="100" text="Giới Hạn" />
                    </columns>
                </TableView>
                <Pagination fx:id="readersPagination" prefHeight="40" prefWidth="200" />
            </VBox>
        </StackPane>
    </center>
</BorderPane>
